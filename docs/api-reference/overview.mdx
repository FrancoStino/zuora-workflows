---
title: API Reference Overview
description: Complete overview of REST APIs available in Zuora Workflow Manager
---

# API Reference Overview

Zuora Workflow Manager provides a set of REST APIs for programmatic integration. This section documents all available endpoints, HTTP methods, and request/response formats.

## Authentication

The API requires authentication via Laravel Sanctum.

### Obtaining Auth Token

After logging into the Filament panel, you can obtain the token from the dashboard or via API.

<Note>
The token must be sent in `Authorization: Bearer YOUR_TOKEN` header with each request.
</Note>

## Base URL

The base URL depends on environment:

```bash
# Development
https://zuora-workflows.lndo.site/api

# Production
https://yourdomain.com/api
```

## Available Endpoints

### 1. User Information

Retrieve information about authenticated user.

**Endpoint:** `GET /user`

**Authentication:** Required (`auth:sanctum`)

**Request Headers:**
```http
GET /api/user HTTP/1.1
Host: zuora-workflows.lndo.site
Authorization: Bearer YOUR_TOKEN
Accept: application/json
```

**Response Success (200):**
```json
{
  "id": 1,
  "name": "John Doe",
  "email": "john@example.com",
  "email_verified_at": "2025-12-27T10:00:00.000000Z",
  "created_at": "2025-01-01T10:00:00.000000Z",
  "updated_at": "2025-12-27T10:00:00.000000Z"
}
```

**Response Error (401):**
```json
{
  "message": "Unauthenticated"
}
```

### 2. Ottenere Token Zuora

Recupera un OAuth token da Zuora API. Questo endpoint proxy la richiesta a Zuora.

**Endpoint:** `GET /zuora/token`

**Authentication:** Richiesto (`auth:sanctum`)

**Request Headers:**
```http
GET /api/zuora/token HTTP/1.1
Host: zuora-workflows.lndo.site
Authorization: Bearer YOUR_TOKEN
Accept: application/json
```

**Query Parameters:**
No required parameters. Uses configured customer credentials.

**Response Success (200):**
```json
{
  "accessToken": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
}
```

**Response Error (500):**
```json
{
  "error": "Failed to authenticate with Zuora: Invalid credentials"
}
```

**Use Cases:**
- Obtain Zuora OAuth token for external integrations
- Test connection with Zuora API
- Debug Zuora authentication

### 3. Download Workflow

Download JSON definition of a specific workflow from Zuora.

**Endpoint:** `GET /zuora/download/{workflowId}`

**Authentication:** Required (`auth:sanctum`)

**Path Parameters:**
| Parameter | Type | Required | Description |
|-----------|-------|-----------|-------------|
| `workflowId` | string/int | Yes | Zuora workflow ID to download |

**Query Parameters:**
| Parameter | Type | Required | Description |
|-----------|-------|-----------|-------------|
| `client_id` | string | Yes | Zuora Client ID of customer |
| `client_secret` | string | Yes | Zuora Client Secret of customer |
| `base_url` | string | No | Zuora API base URL (default: https://rest.zuora.com) |

**Request Example:**
```http
GET /api/zuora/download/2c92a0f8ce4830e9b73411ea6b2a7?client_id=abc123&client_secret=xyz789&base_url=https://rest.zuora.com HTTP/1.1
Host: zuora-workflows.lndo.site
Authorization: Bearer YOUR_TOKEN
Accept: application/json
```

**Response Success (200):**
```json
{
  "id": "2c92a0f8ce4830e9b73411ea6b2a7",
  "name": "My Workflow",
  "description": "Workflow for customer synchronization",
  "version": "1.0",
  "tasks": [
    {
      "id": "task-1",
      "name": "Send Email",
      "action_type": "Email",
      "object": "Email",
      "parameters": {
        "email": {
          "subject": "Sync Notification",
          "to": "admin@example.com"
        }
      }
    }
  ]
}
```

**Response Error (404):**
```json
{
  "error": "Workflow not found"
}
```

**Response Error (401):**
```json
{
  "error": "Invalid Zuora credentials"
}
```

**Response Error (500):**
```json
{
  "error": "Failed to download workflow: Connection timeout"
}
```

## Standard Headers

### Request Headers

| Header | Required | Description |
|--------|-----------|-------------|
| `Authorization` | Yes (most endpoints) | Bearer Token: `Bearer YOUR_TOKEN` |
| `Accept` | Yes | Accepted content type: `application/json` |
| `Content-Type` | Yes (POST/PUT) | Body content type: `application/json` |

### Response Headers

| Header | Description |
|--------|-------------|
| `Content-Type` | Response content type |
| `Cache-Control` | Caching policy |
| `X-RateLimit-Limit` | Rate limit (if active) |
| `X-RateLimit-Remaining` | Remaining requests (if active) |

## Standard Errors

### Error Format

All errors follow this format:

```json
{
  "message": "Error description",
  "errors": {
    "field": ["Specific field error"]
  },
  "exception": "ExceptionName"
}
```

### HTTP Status Codes

| Code | Meaning | Description |
|---------|-------------|-------------|
| `200` | OK | Request completed successfully |
| `201` | Created | Resource created successfully |
| `400` | Bad Request | Malformed request |
| `401` | Unauthorized | Invalid or missing authentication token |
| `403` | Forbidden | Insufficient permissions |
| `404` | Not Found | Resource not found |
| `422` | Unprocessable Entity | Validation failed |
| `429` | Too Many Requests | Rate limit exceeded |
| `500` | Internal Server Error | Internal server error |
| `503` | Service Unavailable | Service temporarily unavailable |

## Usage Examples

### Example 1: Curl - Get User Info

```bash
# Get user info
curl -X GET https://zuora-workflows.lndo.site/api/user \
  -H "Authorization: Bearer YOUR_TOKEN" \
  -H "Accept: application/json"
```

### Example 2: Curl - Get Zuora Token

```bash
# Get Zuora token
curl -X GET "https://zuora-workflows.lndo.site/api/zuora/token" \
  -H "Authorization: Bearer YOUR_TOKEN" \
  -H "Accept: application/json"
```

### Example 3: Curl - Download Workflow

```bash
# Download workflow
curl -X GET "https://zuora-workflows.lndo.site/api/zuora/download/2c92a0f8ce4830e9b73411ea6b2a7?client_id=YOUR_CLIENT_ID&client_secret=YOUR_CLIENT_SECRET&base_url=https://rest.zuora.com" \
  -H "Authorization: Bearer YOUR_TOKEN" \
  -H "Accept: application/json" \
  -o workflow.json
```

### Example 4: JavaScript Fetch

```javascript
// Get user info
const response = await fetch('https://zuora-workflows.lndo.site/api/user', {
  headers: {
    'Authorization': `Bearer ${token}`,
    'Accept': 'application/json'
  }
});

const user = await response.json();
console.log(user);
```

### Example 5: PHP Guzzle

```php
// Download workflow with Guzzle
use GuzzleHttp\Client;

$client = new Client();
$response = $client->request('GET', 'https://zuora-workflows.lndo.site/api/zuora/download/WORKFLOW_ID', [
    'headers' => [
        'Authorization' => 'Bearer ' . $token,
        'Accept' => 'application/json'
    ],
    'query' => [
        'client_id' => $clientId,
        'client_secret' => $clientSecret,
        'base_url' => 'https://rest.zuora.com'
    ]
]);

$workflowData = json_decode($response->getBody(), true);
```

### Example 6: Python Requests

```python
import requests

# Get user info
headers = {
    'Authorization': f'Bearer {token}',
    'Accept': 'application/json'
}

response = requests.get('https://zuora-workflows.lndo.site/api/user', headers=headers)
user = response.json()
print(user)
```

## Rate Limiting

<Note>
Currently not implemented, but API is designed to support rate limiting in the future.
</Note>

### Rate Limit Headers (Future)

```http
X-RateLimit-Limit: 100
X-RateLimit-Remaining: 95
X-RateLimit-Reset: 1735272000
```

### Rate Limit Handling

```php
// Rate limit handling example
$response = $client->request('GET', '/api/user');

if ($response->getStatusCode() === 429) {
    $resetAt = $response->getHeader('X-RateLimit-Reset')[0];
    sleep($resetAt - time() + 1);
    // Retry request
}
```

## CORS

For cross-origin requests, configure CORS in `config/cors.php`:

```php
// config/cors.php

return [
    'paths' => ['api/*', 'sanctum/csrf-cookie'],
    'allowed_methods' => ['*'],
    'allowed_origins' => ['*'],  // Specify your domains
    'allowed_origins_patterns' => [],
    'allowed_headers' => ['*'],
    'exposed_headers' => [],
    'max_age' => 0,
    'supports_credentials' => false,
];
```

## Testing API

### Pest Test Example

```php
// tests/Feature/ApiTest.php

use App\Models\User;

test('get user info', function () {
    $user = User::factory()->create();
    $token = $user->createToken('test-token')->plainTextToken;

    $response = $this->getJson('/api/user', [
        'Authorization' => "Bearer {$token}"
    ]);

    $response->assertStatus(200)
        ->assertJson([
            'id' => $user->id,
            'name' => $user->name,
            'email' => $user->email
        ]);
});
```

### Test with Postman

1. Import collection (to be provided in the future)
2. Configure base URL
3. Add token in Authorization header
4. Execute requests

## API Best Practices

### 1. Token Management

```javascript
// Save token and reuse
localStorage.setItem('api_token', token);

// Use token in requests
const headers = {
    'Authorization': `Bearer ${localStorage.getItem('api_token')}`
};
```

### 2. Error Handling

```javascript
try {
    const response = await fetch('/api/user', { headers });
    if (!response.ok) {
        const error = await response.json();
        console.error('API Error:', error.message);
        // Handle error
    }
} catch (error) {
    console.error('Network Error:', error);
}
```

### 3. Pagination

<Note>
Currently API endpoints do not support pagination. Implement if needed for large lists.
</Note>

```javascript
// Future pagination example
let page = 1;
let allData = [];

do {
    const response = await fetch(`/api/workflows?page=${page}`);
    const data = await response.json();
    allData.push(...data.data);
    page++;
} while (data.hasMore);
```

## Next Steps

<CardGroup cols={2}>
  <Card title="Authentication" icon="lock" href="/api-reference/authentication">
    Authentication and authorization details
  </Card>
  <Card title="Endpoints" icon="endpoint" href="/api-reference/endpoints">
    Complete endpoints documentation
  </Card>
  <Card title="Examples" icon="code" href="/api-reference/examples">
    Advanced usage examples
  </Card>
  <Card title="Features" icon="play" href="/features/workflows">
    Use application features
  </Card>
</CardGroup>

## Resources

- ðŸ“– [Laravel API Resources](https://laravel.com/docs/api-resources)
- ðŸ“– [Laravel Sanctum](https://laravel.com/docs/sanctum)
- ðŸ“– [REST API Best Practices](https://restfulapi.net/)
- ðŸ“– [OpenAPI Specification](https://swagger.io/specification/)

---

**API Version**: 1.0 |
**Last Updated**: December 2025
